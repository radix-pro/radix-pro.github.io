var list = {
  "PROXY 192.168.1.1:8888": [
    "ifconfig.me",
    "openai.com",
    "btc-alpha.com",
    "www.speedtest.net",
    "10minutemail.com",
    "4pda.ru",
    "abs-zero.twimg.com",
    "abs.twimg.com",
    "account-api.protonmail.com",
    "account.protonmail.com",
    "acf.international",
    "adguard.com",
    "afcs.dellcdn.com",
    "aftermarket.zf.com",
    "agents.media",
    "agentura.ru",
    "alberta.ca",
    "api.openai.com",
    "api.protonmail.ch",
    "api.radarr.video",
    "api.themoviedb.org",
    "api.twitter.com",
    "aplawrence.com",
    "app.m3u.in",
    "app.paraswap.io",
    "apt.releases.hashicorp.com",
    "aqicn.org",
    "artifacts.elastic.co",
    "atlassian.com",
    "auth0.openai.com",
    "bbc.com",
    "bitcoin.org",
    "bitru.org",
    "boosteroid.com",
    "bt.t-ru.org",
    "bt2.t-ru.org",
    "bt3.t-ru.org",
    "bt4.t-ru.org",
    "canva.com",
    "cdninstagram.com",
    "certifytheweb.com",
    "checkout.buckaroo.nl",
    "cherta.media",
    "chess.com",
    "cisco.com",
    "citrix.com",
    "clamav.net",
    "cloud.mongodb.com",
    "cloudflare-dns.com",
    "colta.ru",
    "community.cisco.com",
    "crunchyroll.com",
    "database.clamav.net",
    "deezer.com",
    "dell.com",
    "deviantart.com",
    "devops.com",
    "dist.torproject.org",
    "dlcdnets.asus.com",
    "docker.elastic.co",
    "docs.redis.com",
    "download.lenovo.com",
    "doxajournal.ru",
    "dw.com",
    "e1v-h.phncdn.com",
    "ehorussia.com",
    "ej.ru",
    "euronews.com",
    "event.on24.com",
    "facebook.com",
    "fbcdn.net",
    "flibusta.is",
    "fork.pet",
    "forklog.com",
    "formula1.com",
    "forum.voynaplemyon.com",
    "gallery.zetalliance.org",
    "geni.us",
    "ggpht.com",
    "gitlab.io",
    "gllto.glpals.com",
    "gnome-look.org",
    "golosameriki.com",
    "googletagmanager.com",
    "gordonua.com",
    "grammarly.com",
    "gulagu.net",
    "hd.zetfix.online",
    "helm.releases.hashicorp.com",
    "holod.global.ssl.fastly.net",
    "holod.media",
    "hyperhost.ua",
    "ichef.bbci.co.uk",
    "image.tmdb.org",
    "img.youtube.com",
    "instagram.com",
    "instagram.fhrk1-1.fna.fbcdn.net",
    "instagram.fkun2-1.fna.fbcdn.net",
    "instagram.frix7-1.fna.fbcdn.net",
    "instagram.fvno2-1.fna.fbcdn.net",
    "intel.com",
    "istories.media",
    "kasparov.ru",
    "kavkaz-uzel.eu",
    "kino.pub",
    "kinobase.org",
    "kinokopilka.pro",
    "kinovod.net",
    "kinozal.me",
    "kinozal.tv",
    "lenovo.com",
    "lib.rus.ec",
    "linkedin.com",
    "linuxiac.com",
    "localbitcoins.com",
    "lostfilm.run",
    "lostfilm.tv",
    "lostfilm.win",
    "m.strava.com",
    "macpaw.com",
    "macvendors.com",
    "mail.protonmail.com",
    "marketplace.atlassian.com",
    "master.qt.io",
    "mattermost.com",
    "mdza.io",
    "mediazona.ca",
    "mediazona.online",
    "meduza.io",
    "megapeer.ru",
    "memohrc.org",
    "metacritic.com",
    "meteo.paraplan.net",
    "monster.ie",
    "mouser.com",
    "mrakopedia.net",
    "mt.lv",
    "mult.ru",
    "my.atlassian.com",
    "nasvsehtoshnit.ru",
    "navalny.com",
    "netflix.com",
    "news.google.com",
    "newtimes.ru",
    "nnmclub.to",
    "nordvpn.com",
    "novayagazeta.eu",
    "nyaa.si",
    "nyaa.tracker.wf",
    "oasis.app",
    "omv-extras.org",
    "onlinesim.ru",
    "os.mbed.com",
    "ovdinfo.org",
    "packages.gitlab.com",
    "paperpaper.ru",
    "path3.xtracloud.net",
    "pay.buckaroo.nl",
    "paypal.com",
    "pb.wtf",
    "pbs.twimg.com",
    "piccy.info",
    "platform.twitter.com",
    "play.google.com",
    "pornolab.net",
    "portal.bgpmon.net",
    "proekt.media",
    "protonmail.com",
    "radarr.servarr.com",
    "radiosvoboda.org",
    "raw-data.gitlab.io",
    "redis.com",
    "refinitiv.com",
    "registry.terraform.io",
    "releases.hashicorp.com",
    "repo.mongodb.org",
    "republic.ru",
    "rpm.grafana.com",
    "ru.bellingcat.com",
    "ru.depositphotos.com",
    "ru.krymr.com",
    "rus-media.org",
    "rus.delfi.lv",
    "rutor.info",
    "rutor.is",
    "rutor.org",
    "rutracker.org",
    "rutracker.ru",
    "s3-1.amazonaws.com",
    "saverudata.info",
    "saverudata.online",
    "sebeanus.online",
    "secure-web.cisco.com",
    "seedoff.zannn.top",
    "semnasem.org",
    "serpstat.com",
    "skladchik.com",
    "slideshare.net",
    "soapui.org",
    "sobesednik.ru",
    "soundcloud.com",
    "spotify.com",
    "st.kinovod.net",
    "static-ss.xvideos-cdn.com",
    "strava.com",
    "stream.voidboost.cc",
    "stulchik.net",
    "support.cambiumnetworks.com",
    "support.huawei.com",
    "support.ruckuswireless.com",
    "svoboda.org",
    "svtv.org",
    "sysdig.com",
    "t.co",
    "tayga.info",
    "terraform.io",
    "theins.press",
    "theins.ru",
    "themoviedb.org",
    "tidal.com",
    "timberland.com",
    "tjournal.ru",
    "tmdb.org",
    "tools.cisco.com",
    "torproject.org",
    "torrent.by",
    "tr.anidub.com",
    "tutanota.com",
    "tvrain.ru",
    "twitter.com",
    "underver.se",
    "unian.net",
    "uniongang.tv",
    "velocidrone.com",
    "vhd.zetflix.online",
    "video.twimg.com",
    "vot-tak.tv",
    "vrv.co",
    "vyos.io",
    "watchguard.com",
    "weather.com",
    "weblance.com.ua",
    "welt.de",
    "wheather.com",
    "wide-youtube.l.google.com",
    "windguru.cz",
    "wunderground.com",
    "asus.com",
    "bbc.com",
    "bradyid.com",
    "cisco.com",
    "currenttime.tv",
    "dell.com",
    "deviantart.com",
    "dw.com",
    "grammarly.com",
    "hrw.org",
    "intel.com",
    "kavkazr.com",
    "lenovo.com",
    "lostfilmtv5.site",
    "moscowtimes.ru",
    "patreon.com",
    "postfix.org",
    "qualcomm.com",
    "smashwords.com",
    "stalker2.com",
    "the-village.ru",
    "themoviedb.org",
    "torproject.org",
    "wikiart.org",
    "wunderground.com",
    "xhamster.com",
    "xhamsterlive.com",
    "xiaomi.eu",
    "xnxx.com",
    "xvideos.com",
    "yt3.ggpht.com",
    "ytimg.l.google.com",
    "zetflix.online",
    "znanija.com",
    "zohomail.com",
    "zona.media",
  ],
};

function partition(arr, start, end) {
  const pivotValue = arr[start]
  let swapIndex = start
  for (let i = start + 1; i <= end; i++) {
    if (pivotValue > arr[i]) {
      swapIndex++
      if (i !== swapIndex) {
        ;[arr[i], arr[swapIndex]] = [arr[swapIndex], arr[i]]
      }
    }
  }
  if (swapIndex !== start) {
    ;[arr[swapIndex], arr[start]] = [arr[start], arr[swapIndex]]
  }
  return swapIndex
}
    
function quickSort(arr, start = 0, end = arr.length - 1) {
  if (start >= end) return;
  let pivotIndex = partition(arr, start, end);
  quickSort(arr, start, pivotIndex - 1);
  quickSort(arr, pivotIndex + 1, end);
  return arr
}

Array.prototype.binarySearch = function(v) {
    if ( !this.length ) { return false; }
    if ( this[0] === v ) { return true; }
    var i, mid,
        start = 0,
        end = this.length,
        c = false;
    while ( c = (i = this[mid = start+((end-start)>>1)]) !== v ) {
        i < v ? (start = mid) : (end = mid);
        if (start >= end - 1) { break; }
    }
    return !c
};

for ( let [key, value] of Object.entries(list) ) {
    var converted = [];
    for ( let [num, host] of Object.entries(value) ) {
        var chunks = host.split('.');
        if ( !Array.isArray(converted[chunks.length]) ) {
            ;converted[chunks.length] = []
        }
        ;converted[chunks.length].push(host)
    }
    for ( let [num] of Object.entries(converted) ) {
        ;converted[num] = quickSort(converted[num].map(e => e.toLowerCase()))
    }
    list[key] = converted;
}

function FindProxyForURL(url, host) {
    for (let [key, value] of Object.entries(list)) {
        var chunks = host.split('.');
        for ( var i = chunks.length; i > 0; i--) {
            if ( Array.isArray(value[i]) && value[i].binarySearch(chunks.join('.').toLowerCase()) ) {
                ;return(key)
            }
            ;chunks.shift()
        }        
    }
    return "DIRECT"
}
